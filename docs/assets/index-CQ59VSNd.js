(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function o(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(t){if(t.ep)return;t.ep=!0;const n=o(t);fetch(t.href,n)}})();const m="https://restcountries.com/v3.1",u="name,flags,population,region,capital,cca3";async function p(){const e=await fetch(`${m}/all?fields=${u}`);if(!e.ok)throw new Error("Error fetching data");return e.json()}function f(e){return{name:e.name?.common??"No known country",flagsSrc:e.flags?.png??e.flags?.svg??"",flagAlt:e.flags.alt??`${e.name?.common??"Country"} flag`,population:e.population??null,region:e.region??null,capital:e.capital?.[0]??null,code:e.cca3??null}}function g(e,a){e.textContent="";for(const o of a){const r=document.createElement("a");r.className="card",r.href=`details.html?name=${o.name}`;const t=document.createElement("img");t.className="flag",t.src=o.flagsSrc,t.alt=o.flagAlt;const n=document.createElement("div");n.className="card-body";const c=document.createElement("h2");c.className="name",c.textContent=o.name,n.appendChild(c);const l=document.createElement("p");l.className="population",l.textContent=`Population: ${o.population}`,n.appendChild(l);const s=document.createElement("p");s.className="region",s.textContent=`Region: ${o.region??"not found"}`,n.appendChild(s);const i=document.createElement("p");i.className="capital",i.textContent=`Capital: ${o.capital??"not found"}`,n.appendChild(i),r.appendChild(t),r.appendChild(n),e.appendChild(r)}}function h(e,a,o){const r=a.trim().toLowerCase(),t=o.trim();return e.filter(n=>{const c=r===""||n.name.toLowerCase().includes(r),l=t===""||n.region===t;return c&&l})}function C(e,a,o){const r=()=>o(e.value,a.value);e.addEventListener("input",r),a.addEventListener("change",r)}const d="theme";function E(){const e=document.getElementById("theme-toggle");let o=localStorage.getItem(d)??"light";document.documentElement.setAttribute("data-theme",o),e&&(e.textContent=o==="dark"?"Light Mode":"Dark Mode",e.addEventListener("click",()=>{o=o==="dark"?"light":"dark",document.documentElement.setAttribute("data-theme",o),localStorage.setItem(d,o),e.textContent=o==="dark"?"Light Mode":"Dark Mode"}))}document.addEventListener("DOMContentLoaded",async()=>{E();const e=document.getElementById("grid"),a=document.getElementById("search"),o=document.getElementById("region"),t=(await p()).map(f);let n="",c="";const l=()=>{const s=h(t,n,c);g(e,s)};l(),C(a,o,(s,i)=>{n=s,c=i,l()})});
